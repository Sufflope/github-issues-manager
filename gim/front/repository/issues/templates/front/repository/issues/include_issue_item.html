{% load querystring frontutils issues_tags %}{% spaceless %}
{% with issue_labels=issue.labels.all %}<li id="issue-{{ issue.pk }}" class="box-section news issue-item state-{{ issue.state }} hoverable-issue" data-issue-number="{{ issue.number }}" data-issue-id="{{ issue.id }}" data-repository="{{ issue.repository.full_name }}" data-repository-id="{{ issue.repository.id }}" data-issue-hash="{{ issue.saved_hash }}" data-filter="state:{{ issue.state }}" data-search="{{ issue.user.username }} #{{ issue.number }} {{ issue.title }}{% if issue.milestone %} {{ issue.milestone.title }}{% endif %}{% for label in issue_labels %}{% if label.label_type_id %} {{ label.label_type.name }}:{{ label.typed_name }}{% endif %}{% endfor %}{% for label in issue_labels %}{% if not label.label_type_id %} {{ label.name }}{% endif %}{% endfor %}">
    <div class="issue-item-header" data-filter="repository:{{ issue.repository.full_name }}">
        <div class="issue-item-times">
            <span title="Created on {{ issue.created_at|date:"DATETIME_FORMAT" }}" class="ago ago-short" data-datetime="{{ issue.created_at|date:'r' }}">{{ issue.created_at|ago:True }}</span>
            {% if issue.state == 'closed' %}
                {% if issues.updated_at > issue.closed_at %}
                    <i class="fa fa-caret-right"> </i> <span title="Closed{% if issue.closed_by %} by {{ issue.closed_by.username }}{% endif %} on {{ issue.closed_at|date:"DATETIME_FORMAT" }}, updated on {{ issue.updated_at|date:"DATETIME_FORMAT" }}" class="ago ago-short" data-datetime="{{ issue.updated_at|date:'r' }}">{{ issue.updated_at|ago:True }}</span>
                {% else %}
                    <i class="fa fa-caret-right"> </i> <span title="Closed{% if issue.closed_by %} by {{ issue.closed_by.username }}{% endif %} on {{ issue.closed_at|date:"DATETIME_FORMAT" }}" class="ago ago-short" data-datetime="{{ issue.closed_at|date:'r' }}">{{ issue.closed_at|ago:True }}</span>
                {% endif %}
            {% else %}
                {% if issue.updated_at and issue.created_at != issue.updated_at %}
                    <i class="fa fa-caret-right"> </i> <span title="Updated on {{ issue.updated_at|date:"DATETIME_FORMAT" }}" class="ago ago-short" data-datetime="{{ issue.updated_at|date:'r' }}">{{ issue.updated_at|ago:True }}</span>
                {% endif %}
            {% endif %}
        </div>
        {% if issue.is_pull_request %}
            <div class="issue-item-pull-request">
                <a href="" title="It's a pull request" class="js-filter-trigger" data-filter='pr:yes'>
                    <i class="fa fa-code"> </i>
                </a>
            </div>
        {% else %}
            <span data-filter="pr:no" style="display:none"/>
        {% endif %}
        {% if issue.milestone %}
            <div class="issue-item-milestone">
                <a href="" class="js-filter-trigger" data-filter='milestone:{{ issue.milestone.number }}'>
                    <i class="fa fa-tasks text-{{ issue.milestone.state }}" title="{{ issue.milestone.state|capfirst }} milestone{% if issue.milestone.state == 'open' and issue.milestone.due_on %}, due on {{ issue.milestone.due_on|date:'DATE_FORMAT' }} {% endif %}"> </i> {{ issue.milestone.title }}
                </a>
            </div>
        {% endif %}
    </div>
    <a href="" title="Created by {{ issue.user.username }}" class="avatar js-filter-trigger" data-filter='created_by:{{ issue.user.username }}'><img class="avatar-small img-circle lazyload" src="{{ default_avatar }}" data-src="{{ issue.user.full_avatar_url|avatar_size:36 }}" alt="{{ issue.user.username }}"></a>
    {% if issue.closed_by_id %}
        <a href="" title="Closed by {{ issue.closed_by.username }}" class="js-filter-trigger" data-filter='closed_by:{{ issue.closed_by.username }}' style="display:none"></a>
    {% endif %}
    <div class="news-content">
        <div class="news-title">
            <a href="{{ issue.get_absolute_url }}" class="issue-item-link issue-link" data-issue-number="{{ issue.number }}" data-issue-id="{{ issue.id }}" data-repository="{{ issue.repository.full_name }}" data-repository-id="{{ issue.repository.id }}" title="{% if issue.is_pull_request %}Pull-request. {% endif %}State: {{ issue.state }}">
                <strong class="text-{{ issue.state }}">#{{ issue.number }}</strong> - {{ issue.title }}
            </a>
        </div>
    </div>
    <div class="issue-item-footer{% if issue_labels %} with-labels{% endif %}">
        {% if issue.assignee %}
            <a href="" title="Assigned to {{ issue.assignee.username }}" class="issue-item-assignee js-filter-trigger" data-filter='assigned:{{ issue.assignee.username }}'><i class="fa fa-hand-o-right"> </i><img class="avatar-tiny img-circle lazyload" src="{{ default_avatar }}" data-src="{{ issue.assignee.full_avatar_url|avatar_size:24 }}"></a>
        {% endif %}
        {% if issue.total_comments_count %}
            <div class="issue-item-comments-count" title="{{ issue.total_comments_count }} comment{{ issue.total_comments_count|pluralize }}">
                <i class="fa fa-comments-o"> </i>{{ issue.total_comments_count }}
            </div>
        {% endif %}
        <div class="issue-item-labels">
            {% for label in issue_labels %}
                {% if label.label_type_id %}
                        {% attributes_for_list label.label_type.labels.all "name" as label_names %}
                        <a href="" class="js-filter-trigger" style="border-bottom-color: #{{ label.color }}" data-filter='labels:{{ label.name }}' data-type-name='{{ label.label_type.name }}' data-type-id='{{ label.label_type.id }}'>
                            <strong>{{ label.label_type.name }}:</strong> {{ label.typed_name }}
                        </a>
                {% endif %}
            {% endfor %}
            {% for label in issue_labels %}
                {% if not label.label_type_id %}
                        <a href="" class="js-filter-trigger" style="border-bottom: solid 3px #{{ label.color }}" data-filter='labels:{{ label.name }}'>
                            {{ label.name }}
                        </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</li>{% endwith %}{% endspaceless %}
